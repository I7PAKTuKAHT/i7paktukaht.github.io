[{"content":" Шаги подготовки TBD\nВыполнение Удаляем старый сервер БД HANA2 vhtl2basdb01:/hana/shared/BAS/hdblcm # ./hdblcm SAP HANA Lifecycle Management - SAP HANA Database 2.00.037.01.1557479495 ************************************************************************ Choose an action Index | Action | Description ------------------------------------------------------------------------------------------- 1 | add_host_roles | Add Host Roles 2 | add_hosts | Add Hosts to the SAP HANA Database System 3 | check_installation | Check SAP HANA Database Installation 4 | configure_internal_network | Configure Inter-Service Communication 5 | configure_sld | Configure System Landscape Directory Registration 6 | extract_components | Extract Components 7 | print_component_list | Print Component List 8 | remove_host_roles | Remove Host Roles 9 | rename_system | Rename the SAP HANA Database System 10 | uninstall | Uninstall SAP HANA Database Components 11 | unregister_system | Unregister the SAP HANA Database System 12 | update_component_list | Update Component List 13 | update_components | Install or Update Additional Components 14 | update_host | Update the SAP HANA Database Instance Host integration 15 | update | Update the SAP HANA Database System 16 | exit | Exit (do nothing) Enter selected action index [16]: Choose components to be uninstalled for system \u0026#39;BAS\u0026#39;: Index | Components | Description ---------------------------------------------------------------------------------------------- 1 | all | SAP HANA Database version 2.00.037.01.1557479495 and all other components 2 | client | Uninstall SAP HANA Database Client version 2.3.134.1546872976 Enter comma-separated list of the selected indices [1]: Summary before execution: ========================= SAP HANA Database System Uninstallation Software Components SAP HANA Database Client Uninstall version 2.3.134.1546872976 SAP HANA Database Uninstall version 2.00.037.01.1557479495 Note: All data volumes and all log volumes of SAP HANA Database \u0026#39;BAS\u0026#39; will be removed! Do you want to continue? (y/n): y Uninstalling SAP HANA Database System Unregistering SAP HANA Database Components on Local Host... Uninstalling SAP HANA Database Client... Uninstalling SAP HANA Database Client... Uninstalling package Client Installer... Uninstalling package Environment Script... Uninstalling package CommonCryptoLib... Uninstalling package Ruby Client... Uninstalling package golang Client... Uninstalling package node.js Client... Uninstalling package DBCAPI... Uninstalling package HALM Client... Uninstalling package JDBC... Uninstalling package ODBC... Uninstalling package Python DB API... Uninstalling package REPOTOOLS... Uninstalling package SQLDBC... Uninstalling package Product Manifest... Uninstalling package Python Runtime... Uninstalling SAP HANA Database... Uninstalling SAP HANA Database... Removing SAP HANA Database instance... Uninstalling package DAT Configfiles (other)... Uninstalling package DAT Configfiles (EN, DE)... Uninstalling package DAT Languages (other)... Uninstalling package DAT Languages (EN, DE)... Uninstalling package Offline Cockpit... Uninstalling package Delivery Units... Uninstalling package Documentation... Uninstalling package EPM... Uninstalling package HWCCT... Uninstalling package Ini Files... Uninstalling package Installer... Uninstalling package Krb5 Runtime... Uninstalling package Data Quality... Uninstalling package Binaries... Uninstalling package Product Manifest... Uninstalling package Python Runtime... Uninstalling package Python Support... Uninstalling package Saphostagent Setup... Uninstallation of the SAP HANA Database System finished Log file written to \u0026#39;/var/tmp/hdb_BAS_hdblcm_uninstall_2020-02-18_10.30.39/hdblcm.log\u0026#39; on host \u0026#39;vhtl2basdb01\u0026#39;. Готовим экспорт БД BAD vhtl2basdb01:/hana/shared # scp -rp root@vhtl2baddb01:/hana/shared/distr/export ./ vhtl2basdb01:/hana/shared # scp -rp root@vhtl2baddb01:/hana/shared/distr/SAP_HANA_DATABASE ./ vhtl2basdb01:/hana/shared/distr # ll total 529552 drwxr-xr-x 3 root root 108 Mar 22 2018 122.16_distr drwxr-xr-x 8 root root 4096 Mar 9 2018 SAP_HANA_DATABASE -rw-r--r-- 1 root root 542256595 Feb 18 10:59 SWPM10SP28_0-20009701.SAR drwxr-xr-x 3 root root 36 Feb 18 10:42 export Установка HANA1 vhtl2basdb01:/hana/shared/distr/SAP_HANA_DATABASE # ./hdblcm SAP HANA Lifecycle Management - SAP HANA 1.00.122.16.1520578817 *************************************************************** Scanning Software Locations... Detected components: SAP HANA Database (1.00.122.16.1520578817) in /hana/shared/distr/SAP_HANA_DATABASE/server Choose installation Index | System | Database Properties ------------------------------------------------ 1 | Install new system | | | 2 | Extract components | 3 | Exit (do nothing) | Enter selected system index [3]: 1 Enter Installation Path [/hana/shared]: Enter Local Host Name [vhtl2basdb01]: Do you want to add additional hosts to the system? (y/n) [n]: Enter SAP HANA System ID: BAS Enter Instance Number [00]: Index | Database Mode | Description ----------------------------------------------------------------------------------------------- 1 | single_container | The system contains one database 2 | multiple_containers | The system contains one system database and 1..n tenant databases Select Database Mode / Enter Index [1]: Index | System Usage | Description ------------------------------------------------------------------------------- 1 | production | System is used in a production environment 2 | test | System is used for testing, not production 3 | development | System is used for development, not production 4 | custom | System usage is neither production, test nor development Select System Usage / Enter Index [4]: 3 Enter Location of Data Volumes [/hana/data/BAS]: Enter Location of Log Volumes [/hana/log/BAS]: Restrict maximum memory allocation? [n]: Enter Certificate Host Name For Host \u0026#39;vhtl2basdb01\u0026#39; [vhtl2basdb01]: Enter System Administrator (basadm) Password: Confirm System Administrator (basadm) Password: Enter System Administrator Home Directory [/usr/sap/BAS/home]: Enter System Administrator Login Shell [/bin/sh]: Enter System Administrator User ID [1000]: Enter Database User (SYSTEM) Password: Confirm Database User (SYSTEM) Password: Restart system after machine reboot? [n]: Summary before execution: ========================= SAP HANA Components Installation Installation Parameters Remote Execution: ssh Installation Path: /hana/shared Local Host Name: vhtl2basdb01 SAP HANA System ID: BAS Instance Number: 00 Database Mode: single_container System Usage: development Location of Data Volumes: /hana/data/BAS Location of Log Volumes: /hana/log/BAS Certificate Host Names: vhtl2basdb01 -\u0026gt; vhtl2basdb01 System Administrator Home Directory: /usr/sap/BAS/home System Administrator Login Shell: /bin/sh System Administrator User ID: 1000 ID of User Group (sapsys): 1001 Software Components SAP HANA Database Install version 1.00.122.16.1520578817 Location: /hana/shared/distr/SAP_HANA_DATABASE/server Do you want to continue? (y/n): y Installing components... Installing SAP HANA Database... Preparing package \u0026#39;Saphostagent Setup\u0026#39;... Preparing package \u0026#39;Python Support\u0026#39;... Preparing package \u0026#39;Python Runtime\u0026#39;... Preparing package \u0026#39;Product Manifest\u0026#39;... Preparing package \u0026#39;Binaries\u0026#39;... Preparing package \u0026#39;Data Quality\u0026#39;... Preparing package \u0026#39;Krb5 Runtime\u0026#39;... Preparing package \u0026#39;Installer\u0026#39;... Preparing package \u0026#39;Ini Files\u0026#39;... Preparing package \u0026#39;HWCCT\u0026#39;... Preparing package \u0026#39;Emergency Support Package\u0026#39;... Preparing package \u0026#39;EPM\u0026#39;... Preparing package \u0026#39;Documentation\u0026#39;... Preparing package \u0026#39;Delivery Units\u0026#39;... Preparing package \u0026#39;DAT Languages\u0026#39;... Preparing package \u0026#39;DAT Configfiles\u0026#39;... Creating System... Extracting software... Installing package \u0026#39;Saphostagent Setup\u0026#39;... Installing package \u0026#39;Python Support\u0026#39;... Installing package \u0026#39;Python Runtime\u0026#39;... Installing package \u0026#39;Product Manifest\u0026#39;... Installing package \u0026#39;Binaries\u0026#39;... Installing package \u0026#39;Data Quality\u0026#39;... Installing package \u0026#39;Krb5 Runtime\u0026#39;... Installing package \u0026#39;Installer\u0026#39;... Installing package \u0026#39;Ini Files\u0026#39;... Installing package \u0026#39;HWCCT\u0026#39;... Installing package \u0026#39;Emergency Support Package\u0026#39;... Installing package \u0026#39;EPM\u0026#39;... Installing package \u0026#39;Documentation\u0026#39;... Installing package \u0026#39;Delivery Units\u0026#39;... Installing package \u0026#39;DAT Languages\u0026#39;... Installing package \u0026#39;DAT Configfiles\u0026#39;... Creating instance... Starting SAP HANA Database system... Starting 7 processes on host \u0026#39;vhtl2basdb01\u0026#39; (worker): Starting on \u0026#39;vhtl2basdb01\u0026#39;: hdbcompileserver, hdbdaemon, hdbindexserver, hdbnameserver, hdbpreprocessor, hdbwebdispatcher, hdbxsengine Starting on \u0026#39;vhtl2basdb01\u0026#39;: hdbcompileserver, hdbdaemon, hdbindexserver, hdbpreprocessor, hdbwebdispatcher, hdbxsengine Starting on \u0026#39;vhtl2basdb01\u0026#39;: hdbdaemon, hdbindexserver, hdbwebdispatcher, hdbxsengine Starting on \u0026#39;vhtl2basdb01\u0026#39;: hdbdaemon, hdbwebdispatcher, hdbxsengine Starting on \u0026#39;vhtl2basdb01\u0026#39;: hdbdaemon, hdbwebdispatcher All server processes started on host \u0026#39;vhtl2basdb01\u0026#39; (worker). Importing delivery units... Importing delivery unit HCO_INA_SERVICE Importing delivery unit HANA_DT_BASE Importing delivery unit HANA_IDE_CORE Importing delivery unit HANA_TA_CONFIG Importing delivery unit HANA_UI_INTEGRATION_SVC Importing delivery unit HANA_UI_INTEGRATION_CONTENT Importing delivery unit HANA_XS_BASE Importing delivery unit HANA_XS_DBUTILS Importing delivery unit HANA_XS_EDITOR Importing delivery unit HANA_XS_IDE Importing delivery unit HANA_XS_LM Importing delivery unit HDC_ADMIN Importing delivery unit HDC_BACKUP Importing delivery unit HDC_IDE_CORE Importing delivery unit HDC_SEC_CP Importing delivery unit HDC_XS_BASE Importing delivery unit HDC_XS_LM Importing delivery unit SAPUI5_1 Importing delivery unit SAP_WATT Importing delivery unit HANA_BACKUP Importing delivery unit HANA_HDBLCM Importing delivery unit HANA_SEC_BASE Importing delivery unit HANA_SEC_CP Importing delivery unit HANA_ADMIN Importing delivery unit HANA_WKLD_ANLZ Installing Resident hdblcm... Updating SAP HANA Instance Integration on Local Host... Deploying SAP Host Agent configurations... Creating Component List... SAP HANA system installed Note: Deployment of SAP Host Agent configurations finished with errors You can send feedback to SAP with this form: https://vhtl2basdb01:1129/lmsl/HDBLCM/BAS/feedback/feedback.html Log file written to \u0026#39;/var/tmp/hdb_BAS_hdblcm_install_2020-02-18_13.19.35/hdblcm.log\u0026#39; on host \u0026#39;vhtl2basdb01\u0026#39;. Запуск процесса импорта БД Ошибка сертифката Учетные данные root Сецнарий копирования Расшиеренные опции Профиль системы Корректировка UID и GID UID и GID у пользователей \u0026lt;sid\u0026gt;adm отличались у сервера CI и DB, потребовалось выравнивание.\ngroupmod -g 1000 sapinst groupmod -g 1001 sapsys find /sys /etc/ hana /var /usr/sap/ /home /run -group 1001 -exec chgrp -h sapinst {} \\; + find /sys /etc/ hana /var /usr/sap/ /home /run -group 79 -exec chgrp -h sapsys {} \\; + Порт Message Server Мастер пароль Пользователь\u0026lt;sid\u0026gt;adm FQDN Метод копирования Целевая DB Дистрибутивы SAP Kernel Директория экспорта Администратор DB Схема DBACOCKPIT Схема ABAP (SAPBAS) Настройка Secure Storage Содинение SAPControl Параметры импорта HANA Выполнение отчета SMIGR_CREATE_DDL Настройка Table Placement Настройка параметров импорта Параметры Migration Monitor Действия перед стартом Пароль DDIC в 000 манданте исходной системы Удаление пользователей ОС Страница итогов +\nПроцесс импорт Также в процессе потребовалось включить логи в режим overwrite\nДополнительно ","date":"2022-06-14T00:00:00Z","permalink":"https://example.com/p/%D0%BA%D0%BE%D0%BF%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B-bad-%D0%B2-bas/","title":"Копирование системы BAD в BAS"},{"content":"SAPRouter является важнейшим компонентом системного ландшафта, позволяющим связывать сети клиентов SAP с глобальной сетью поддержки. При помощи SAPRouter можно настроить автоматическую загрузку в систему SAP Notes, а также предоставить доступ в системы специалистам службы поддержки SAP. Чтобы упростить обслуживание SAPRouter запустим его в качестве сервиса операционной системы.\nВ операционных системах *nix для этих целей ранее использовался процесс init, но в последние годы ему на смену пришел systemd https://ru.wikipedia.org/wiki/Systemd.\nНиже инструкция по настройке SAProuter как службы(демона) в ОС с systemd (в моем случае это OpenSuse 15.1 ).\nЗагрузить SAPRouter можно с официальной страницы SAP https://support.sap.com/en/tools/connectivity-tools/saprouter.html\nТакже потребуется SAPCAR соответствующей архитектуры для распаковки SAR архива.\nМне привычнее устанавливать SAPRouter в директорию /usr/sap/saprouter. При необходимости можно сделать внутри разветвленную структуру директорий bin, etc, log, sec, но в моем примере ее не будет.\nСоздадим файл сервиса saprouter.service в /etc/systemd/system/\n[Unit]\rDescription=SAPRouter Service\rAfter=network.target [Service]\rType=simple\rWorkingDirectory=/usr/sap/saprouter\rUser=\u0026lt;user\u0026gt;\rGroup=\u0026lt;group\u0026gt;\rEnvironment=\u0026quot;SECUDIR=/usr/sap/saprouter\u0026quot; \u0026quot;SNC_LIB=/sapmnt/SMD/exe/libsapcrypto.so\u0026quot; ExecStart=/usr/sap/saprouter/saprouter -r -R saprouttab -S 3299 -G saprouter.log\rExecStop=/usr/sap/saprouter/saprouter -s\rExecReload=/usr/sap/saprouter/saprouter -n\rRestart=on-failure\r[Install]\rWantedBy=multi-user.target\rChecking the status:\nlinux-lt2o:~ # systemctl status saprouter\r● saprouter.service - SAPRouter Daemon\rLoaded: loaded (/etc/systemd/system/saprouter.service; disabled; vendor preset: disabled)\rActive: inactive (dead)\rНаш сервис деактивирован и выключен. Активируем:\nlinux-lt2o:~ # systemctl enable saprouter\rCreated symlink /etc/systemd/system/multi-user.target.wants/saprouter.service → /etc/systemd/system/saprouter.service.\rЗапустим службу и проверим ее статус\rlinux-lt2o:~ # systemctl start saprouter\rlinux-lt2o:~ # systemctl status saprouter\r● saprouter.service - SAPRouter Daemon\rLoaded: loaded (/etc/systemd/system/saprouter.service; enabled; vendor preset: disabled)\rActive: active (running) since Mon 2020-06-29 18:48:00 MSK; 34s ago\rMain PID: 3943 (saprouter)\rTasks: 1\rCGroup: /system.slice/saprouter.service\r└─3943 /usr/sap/saprouter/saprouter -r -R saprouttab -S 3299 -G saprouter.log\rJun 29 18:48:00 linux-lt2o systemd[1]: Started SAPRouter Daemon.\rТакже работают команды остановки и перезапуска\nlinux-lt2o:/usr/sap/saprouter # systemctl reload saprouter\rlinux-lt2o:/usr/sap/saprouter # systemctl status saprouter\r● saprouter.service - SAPRouter Daemon\rLoaded: loaded (/etc/systemd/system/saprouter.service; enabled; vendor preset: disabled)\rActive: active (running) since Mon 2020-06-29 20:11:03 MSK; 15s ago\rProcess: 4312 ExecStop=/usr/sap/saprouter/saprouter -s (code=exited, status=0/SUCCESS)\rProcess: 4319 ExecReload=/usr/sap/saprouter/saprouter -n (code=exited, status=0/SUCCESS)\rMain PID: 4315 (saprouter)\rTasks: 1\rCGroup: /system.slice/saprouter.service\r└─4315 /usr/sap/saprouter/saprouter -r -R saprouttab -S 3299 -G saprouter.log\rJun 29 20:11:03 linux-lt2o systemd[1]: Started SAPRouter Daemon.\rJun 29 20:11:12 linux-lt2o systemd[1]: Reloading SAPRouter Daemon.\rJun 29 20:11:12 linux-lt2o saprouter[4319]: Mon Jun 29 20:11:12 2020\rJun 29 20:11:12 linux-lt2o saprouter[4319]: SAP Network Interface Router, Version 40.4\rJun 29 20:11:13 linux-lt2o saprouter[4319]: Mon Jun 29 20:11:13 2020\rJun 29 20:11:13 linux-lt2o saprouter[4319]: peer SAProuter with NI version 40 ...\rJun 29 20:11:13 linux-lt2o saprouter[4319]: send new-routtab-request to running SAProuter ...\rJun 29 20:11:13 linux-lt2o systemd[1]: Reloaded SAPRouter Daemon.\rlinux-lt2o:/usr/sap/saprouter # systemctl stop saprouter\rlinux-lt2o:/usr/sap/saprouter # systemctl status saprouter\r● saprouter.service - SAPRouter Daemon\rLoaded: loaded (/etc/systemd/system/saprouter.service; enabled; vendor preset: disabled)\rActive: inactive (dead) since Mon 2020-06-29 20:13:31 MSK; 5s ago\rProcess: 4326 ExecStop=/usr/sap/saprouter/saprouter -s (code=exited, status=0/SUCCESS)\rProcess: 4319 ExecReload=/usr/sap/saprouter/saprouter -n (code=exited, status=0/SUCCESS)\rProcess: 4315 ExecStart=/usr/sap/saprouter/saprouter -r -R saprouttab -S 3299 -G saprouter.log (code=exited, status=0\u0026gt;\rMain PID: 4315 (code=exited, status=0/SUCCESS)\r","date":"2020-06-29T00:00:00Z","permalink":"https://example.com/p/creating-saprouter-systemd-daemon/","title":"Creating SAPRouter systemd daemon"},{"content":"Последние несколько лет плотно занимался SAP HANA и с Oracle почти не имел дел. И вот недавно с удивлением обнаружил, что Oracle сменил нумерацию продуктов, за версией 12.2 идет 18c, а за ней 19 (подробнее можно тут почитать News about the new Oracle Database Release Schedule https://cutt.ly/myvvJMH). Сразу зачесались руки провести соответствующее обновление. Спойлер: ниже будут только краткие заметки по процедуре, скрины и логи терминала я не сохранял.\nВ работе использовал следующие ноты/гайды:\n2540847 — SAP Guides for Oracle Database Upgrade Upgrade to Oracle Database 18c UNIX https://cutt.ly/nyvvDC6 Мои заметки по порядку выполнения работ:\nОбновляем BRtools и ядро SAP\nРаспаковываем новый Oracle, db_home\nУстанавливаем Oracle через ./RUNINSTALLER (в процессе было много параметров и проверок)\nПроверка наличия пакетов и параметров ядра ОС. В моем случае потребовалось дополнительно установить glibc-devel\nВременно меняем значение переменных окружения на новый ORACLE_HOME.\nОстанавливаем все БД и сервисы Oracle\nТут можно уже обновлять oracle client и перевозить listener\nСтавим Oracle и SAP Bundle Patches\nПрогоняем pre-upgrade проверки и скрипты\nУдаляем DBA Cocpit view из БД по ноте 706927 — Oracle DB-Mon: Installation script for ST04N or DBACockpit\nДелаем бекап конфигурации listener\ncp -rp admin admin.SAVE.date \u0026quot;+%Y_%m_%d-%H-%M-%S\u0026quot;\rПереносим listener в новый ORACLE_HOME\nБекапим БД, pfile и spfile\ncreate pfile='/init.ora.before_upgrade' from spfile;\rДля GRP (guaranteed restore point @grp_create_restore_point.sql) нужно включить media recovery в Oracle\nМеняем параметры alter system и перезапускаем инстанцию\nПроверка ./dbua.sap.sh -q и запуск ./dbua.sap.sh\nSYSDBA Не указываем, пользуемся $OPS или SSFS\nМеняем окружения, все 121 на 18 в файлах .dbenv.sh и .dbenv.csh. Запуск БД в новых окружениях в $HOME пользователей oracle и adm\nВыполняем скрипты постобработки инсталляции Oracle и SAP Bundle Patches\nПерезапуск системы\nПроверка параметров БД по ноте 1171650 — Automated Oracle DB parameter check или 2470718 — Oracle Database Parameter 12.2 / 18c\n","date":"2020-05-09T00:00:00Z","permalink":"https://example.com/p/%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-oracle-12.x-%D0%B4%D0%BE-18c/","title":"Обновление Oracle 12.x до 18c"},{"content":"English*: Manual for SAP BOBj 4.x Administrator password reset here\nПродолжаем тему взлома восстановления паролей в системах SAP. Наткнулся на интересный способ сброса пароля Administrator в SAP Bobj 4.X . Инструкция по сути не моя, с меня перевод и небольшие корректировки.\nПри помощи Central Configuration Manager (CCM) остановите SIA. CCM расположен в Start \u0026gt; Programs \u0026gt; SAP BusinessObjects Enterprise XI 4.0 \u0026gt; SAP BusinessObjects Enterprise \u0026gt; Central Configuration Manager.\nЧерез командную строку запустите исполняемый файл cms.exe. Добавив следующие параметры и переключатели к :\n«C:\\Program Files (x86)\\SAP BusinessObjects\\SAP BusinessObjects Enterprise XI 4.0\\win64_x64\\cms.exe» -loggingPath «C:/Program Files (x86)/SAP BusinessObjects/SAP BusinessObjects Enterprise XI 4.0/logging/» -port 6400 -restart -dbinfo «C:/Program Files (x86)/SAP BusinessObjects/SAP BusinessObjects Enterprise XI 4.0/win64_x64/_boe_%ACME%.dbinfo» -noauditor -autoboot -fg -name %ACME%.cms —pidfile «C:/Program Files (x86)/SAP BusinessObjects/SAP BusinessObjects Enterprise XI 4.0/serverpids/%ACME%\\_%ACME%.CentralManagementServer.pid» -serverconsole\r%ACME% это имя хоста на котором установлен SAP BI. На всякий случай убедитесь в существовании соответствующих файлов. SIA запустится в консольном режиме. Через некоторое время система выдаст приглашение о готовности к приему команд.\nПерейдите в директорию: \u0026lt;BOE_INSTALL_DIR\u0026gt;\\SAP BusinessObjects\\SAP BusinessObjects Enterprise XI 4.0\\dfo В папке dfo содержится вложенная папка со случайно сгенерированым именем начинающимся на dfo_\nСкопируйте файл BusinessObjects_Administrator_dfo.xml из директории dfo_ в следующую директорию:\n\u0026lt;BOE_INSTALL_DIR\u0026gt;\\SAP BusinessObjects Enterprise XI 4.0\\packages\rВыполните следующий запрос:\nselect si_id from ci_systemobjects where si_name=’Administrator’\rОн возвратит 4 записи.\nПодсказка: Одна из записей будет иметь значение SI_ID 12.\nУдалите объекты при помощи команды\ndelete \u0026lt;ID_NUMBER\u0026gt;\u0026gt;\rУбедитесь что все объекты были удалены повторно выполнив запрос из шага 5:\nselect si_id from ci_systemobjects where si_name=’Administrator’\rНи одного объекта не должны вернуться\nВыполните запрос:\nselect si_id from ci_systemobjects where si_name=’BusinessObjects_Administrator_dfo.xml’ Она должна вернуть одну запись.\nУдалите объект введя следующую команду:\ndelete \u0026lt;SI_ID\u0026gt;\rВведите quit для выхода и используя CCM запустите SIA.\nТеперь вы можете войти в систему под учетной записью администратора оставив поле Password пустым.\nОпробовал два раза, все работает 🙂\n","date":"2016-03-26T00:00:00Z","permalink":"https://example.com/p/%D1%81%D0%B1%D1%80%D0%BE%D1%81-%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D1%8F-%D0%B0%D0%B4%D0%BC%D0%B8%D0%BD%D0%B8%D1%81%D1%82%D1%80%D0%B0%D1%82%D0%BE%D1%80%D0%B0-%D0%B2-sap-business-objects/","title":"Сброс пароля администратора в SAP Business Objects"},{"content":"В последнее время везет на задачи, связанные с получением доступа к SAP системам от которых утеряны пароли.\nСегодня опишу процесс активации SAP* на системе SAP SM на Sybase ASE при наличии доступа только на уровень ОС. Воспользуемся советами из ноты 1872806 — How to set a new password for SA account in Sybase ASE server , немного изменив их под нашу ситуацию.\nВходим на сервер под учетной записью syb. Под ней прописаны все нужные нам переменные окружения.\nОстанавливаем Sybase.\nНам необходимо найти файл запуска БД по адресу $SYBASE/$SYBASE_ASE/install/RUN_ и отредактировать его следующим образом:\n/work/releases/rel16/ASE-16_0/bin/dataserver \\\r-srel16_bret_sun2 \\\r-i/work/releases/rel16 \\\r-N/work/releases/rel16/ASE-16_0/sysam/rel16_bret_sun2.properties \\\r-psapsso -d/work/releases/rel16/data/master.dat \\\r-e/work/releases/rel16/ASE-16_0/install/rel16_bret_sun2.log \\\r-c/work/releases/rel16/ASE-16_0/rel16_bret_sun2.cfg \\\r-M/work/releases/rel16/ASE-16_0 В ноте скорее всего дается пример файла для ОС *nix, в моем случае на Windows параметр запуска был записан в одну строку. Обратите внимание, что в ноте указано добавление параметр -psa тогда как у меня в тексте -psapsso. Этот параметр генерирует пароль для указанного после литеры p аккаунта, в данном случае администратора БД — sa. Однако обычно, по умолчанию, этот логин заблокирован для входа, поэтому генерация пароля его пароля не позволит нам зайти в систему. Вместо этого мы используем другую УЗ с административными правами sapsso.\nЗапускаем сервер БД через отредактированный файл. В случае с ОС Windows необходимо запускать командную строку или PowerShell от имени администратора.\nВ окне терминала/командной строки промелькнет строчка о том, что пароль для указанной нами УЗ sapsso успешно сгенерирован.\n00:0002:00000:00001:2015/11/21 23:03:14.19 server Completed cleaning up the default data cache for database 'sybsystemp\rrocs'.\r00:0002:00000:00001:2015/11/21 23:03:14.19 server Checking external objects.\r00:0002:00000:00001:2015/11/21 23:03:14.39 server The transaction log in the database 'sybsystemprocs' will use I/O siz\re of 16 Kb.\r00:0002:00000:00001:2015/11/21 23:03:14.41 server Database 'sybsystemprocs' is now online.\r**New SSO password for sapsso:swffvtftbabbx3**\r00:0002:00000:00014:2015/11/21 23:03:14.44 kernel server will listen on all networks present on host\r00:0002:00000:00014:2015/11/21 23:03:14.44 kernel network name , interface IPv4, address X.X.X.X, type nlw\rnsck, port 4901, filter NONE\r00:0002:00000:00014:2015/11/21 23:03:14.45 kernel network name , interface IPv4, address X.X.X.X, type nl\rwnsck, port 4901, filter NONE\r00:0002:00000:00014:2015/11/21 23:03:14.45 kernel network name , interface IPv6, address X:X:X:X:X:X\r3d, type nlwnsck, port 4901, filter NONE\r00:0002:00000:00018:2015/11/21 23:03:14.45 kernel hbc_ninit: No sockets available for HBC\rНе закрывая предыдущее окно в новом режиме терминала подключимся к БД под sapsso с новым паролем. Если isql выругается «Adaptive Server requires encryption of the login password on the network» значит на сервере настроен запрет на передачу пароля в незашифрованном виде и к команде вызова нужно будет добавить ключ -X. Процедура сброса паролей пользователей БД подробно описана в ноте 1706410 — SYB: Security — Changing passwords for database users\nC:\\Users\\syb\u0026lt;did\u0026gt;\u0026gt; isql -Usapsso -w132 -c -Pswffvtftbabbx3 -X\r1\u0026gt; alter login sapsso with password \u0026quot;swffvtftbabbx3\u0026quot; modify password \u0026lt;newpassword\u0026gt;\r2\u0026gt; go\r1\u0026gt; sp_locklogin sa, 'unlock'\r2\u0026gt;\rAccount unlocked.\r(return status = 0)\rОстанавливаем сервер БД и повторяем процедуру для sa\nУдаляем основную запись пользователя SAP* в таблице USR02 sa\nC:\\Users\\syb\u0026lt;did\u0026gt;\u0026gt; isql -Usa -w132 -c -Pswffvtftbabbx3 -X\r1\u0026gt; delete from SAPSR3.USR02 where BNAME = \u0026quot;SAP*\u0026quot;\r2\u0026gt;\r(3 rows affected)\rПроверяем значение профильного параметра в профиле инстанции\nlogin/no_automatic_user_sapstar = 0\rУбираем дополнительные ключи в стартовом файле Sybase и запускаем систему SAP Вот и все, надеюсь кому-то пригодится.\n","date":"2015-11-23T00:00:00Z","permalink":"https://example.com/p/se14/","title":"SE14"},{"content":"В последнее время везет на задачи, связанные с получением доступа к SAP системам от которых утеряны пароли.\nСегодня опишу процесс активации SAP* на системе SAP SM на Sybase ASE при наличии доступа только на уровень ОС. Воспользуемся советами из ноты 1872806 — How to set a new password for SA account in Sybase ASE server , немного изменив их под нашу ситуацию.\nВходим на сервер под учетной записью syb. Под ней прописаны все нужные нам переменные окружения.\nОстанавливаем Sybase.\nНам необходимо найти файл запуска БД по адресу $SYBASE/$SYBASE_ASE/install/RUN_ и отредактировать его следующим образом:\n/work/releases/rel16/ASE-16_0/bin/dataserver \\\r-srel16_bret_sun2 \\\r-i/work/releases/rel16 \\\r-N/work/releases/rel16/ASE-16_0/sysam/rel16_bret_sun2.properties \\\r-psapsso -d/work/releases/rel16/data/master.dat \\\r-e/work/releases/rel16/ASE-16_0/install/rel16_bret_sun2.log \\\r-c/work/releases/rel16/ASE-16_0/rel16_bret_sun2.cfg \\\r-M/work/releases/rel16/ASE-16_0 В ноте скорее всего дается пример файла для ОС *nix, в моем случае на Windows параметр запуска был записан в одну строку. Обратите внимание, что в ноте указано добавление параметр -psa тогда как у меня в тексте -psapsso. Этот параметр генерирует пароль для указанного после литеры p аккаунта, в данном случае администратора БД — sa. Однако обычно, по умолчанию, этот логин заблокирован для входа, поэтому генерация пароля его пароля не позволит нам зайти в систему. Вместо этого мы используем другую УЗ с административными правами sapsso.\nЗапускаем сервер БД через отредактированный файл. В случае с ОС Windows необходимо запускать командную строку или PowerShell от имени администратора.\nВ окне терминала/командной строки промелькнет строчка о том, что пароль для указанной нами УЗ sapsso успешно сгенерирован.\n00:0002:00000:00001:2015/11/21 23:03:14.19 server Completed cleaning up the default data cache for database 'sybsystemp\rrocs'.\r00:0002:00000:00001:2015/11/21 23:03:14.19 server Checking external objects.\r00:0002:00000:00001:2015/11/21 23:03:14.39 server The transaction log in the database 'sybsystemprocs' will use I/O siz\re of 16 Kb.\r00:0002:00000:00001:2015/11/21 23:03:14.41 server Database 'sybsystemprocs' is now online.\r**New SSO password for sapsso:swffvtftbabbx3**\r00:0002:00000:00014:2015/11/21 23:03:14.44 kernel server will listen on all networks present on host\r00:0002:00000:00014:2015/11/21 23:03:14.44 kernel network name , interface IPv4, address X.X.X.X, type nlw\rnsck, port 4901, filter NONE\r00:0002:00000:00014:2015/11/21 23:03:14.45 kernel network name , interface IPv4, address X.X.X.X, type nl\rwnsck, port 4901, filter NONE\r00:0002:00000:00014:2015/11/21 23:03:14.45 kernel network name , interface IPv6, address X:X:X:X:X:X\r3d, type nlwnsck, port 4901, filter NONE\r00:0002:00000:00018:2015/11/21 23:03:14.45 kernel hbc_ninit: No sockets available for HBC\rНе закрывая предыдущее окно в новом режиме терминала подключимся к БД под sapsso с новым паролем. Если isql выругается «Adaptive Server requires encryption of the login password on the network» значит на сервере настроен запрет на передачу пароля в незашифрованном виде и к команде вызова нужно будет добавить ключ -X. Процедура сброса паролей пользователей БД подробно описана в ноте 1706410 — SYB: Security — Changing passwords for database users\nC:\\Users\\syb\u0026lt;did\u0026gt;\u0026gt; isql -Usapsso -w132 -c -Pswffvtftbabbx3 -X\r1\u0026gt; alter login sapsso with password \u0026quot;swffvtftbabbx3\u0026quot; modify password \u0026lt;newpassword\u0026gt;\r2\u0026gt; go\r1\u0026gt; sp_locklogin sa, 'unlock'\r2\u0026gt;\rAccount unlocked.\r(return status = 0)\rОстанавливаем сервер БД и повторяем процедуру для sa\nУдаляем основную запись пользователя SAP* в таблице USR02 sa\nC:\\Users\\syb\u0026lt;did\u0026gt;\u0026gt; isql -Usa -w132 -c -Pswffvtftbabbx3 -X\r1\u0026gt; delete from SAPSR3.USR02 where BNAME = \u0026quot;SAP*\u0026quot;\r2\u0026gt;\r(3 rows affected)\rПроверяем значение профильного параметра в профиле инстанции\nlogin/no_automatic_user_sapstar = 0\rУбираем дополнительные ключи в стартовом файле Sybase и запускаем систему SAP Вот и все, надеюсь кому-то пригодится.\n","date":"2015-11-23T00:00:00Z","permalink":"https://example.com/p/%D1%81%D0%B1%D1%80%D0%BE%D1%81-%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D1%8F-sa-%D0%B8-sap-%D0%BD%D0%B0-sap-sybase-ase-15.x/","title":"Сброс пароля sa и SAP* на SAP Sybase ASE 15.x"},{"content":" Сегодня после незапланированной перезагрузки сервера отказалась запускаться MaxDB\nПри попытке перевода базы в режим онлайн получили вот такую ошибку:\n24988,ERR_SQL: SQL error -902,I/O error 3,Database state: OFFLINE Internal errorcode, Error code 9050 \u0026#34;disk_not_accessible\u0026#34; 20017,RestartFilesystem failed with \u0026#39;I/O error\u0026#39; Довольно быстро обнаружил подозрительное сообщение в KnlMsgArchive (в более ранних версиях knldiag.err). Этот файл, как и другие трассировки доступен в MaxDB Run Directory\n\u0026lt;global_data_path\u0026gt;\\wrk\\\u0026lt;database_name\u0026gt;\\\nУзнать текущее значение параметра \u0026lt;global_data_path\u0026gt; можно через dbmcli\n./dbmcli on \u0026lt;SID\u0026gt;\u0026gt;dbm_getpath DataPath OK /sapdb/\u0026lt;SID\u0026gt;/data Подозрительное сообщение было следующим:\n\u0026lt;MSG _NO=»1″ _TYPE=»Error» _ID=»20043″ _COMP=»IOMan» _TEXT=»Capacity of Data_Volume volume 110 in database configuration (1966080) does not match capacity in iomanager info page (128000)»\u0026gt;\nПроверил датафайлы на уровне файловой системы\nЗатем конфигурацию в самой БД командой param_getvolsall через dbmcli\nВидно что размер 110 датафайла определенный в конфигурации базы данных отличается от размера файла на диске. Видимо при добавлении произошла ошибка которая не проявлялась до перезапуска бд.\nОчевидно что в этой ситуации надо поправить конфигурацию в базе. Для этого переключил систему в режим db_offline, сделал резервную копию датафайла, а затем воспользовался двумя командами — param_delvolume и param_addvolume. Первая удаляет сведения о датафайле из конфигурации, вторая добавляет.\n./dbmcli on \u0026lt;SID\u0026gt;\u0026gt;param_delvolume 110 DATA OK --- param_addvolume 110 DATA \u0026#34;/sapdb/\u0026lt;SID\u0026gt;/sapdata/DISKD0099.110\u0026#34; F 128000 OK --- db_online OK --- show state OK SERVERDB: \u0026lt;SID\u0026gt; The SERVERDB state is ONLINE Console command finished (2015-10-26 17:00:02). База успешно запустилась без ошибок. С понедельником 🙂\n","date":"2015-10-26T00:00:00Z","permalink":"https://example.com/p/maxdb-startup-error.-24988err_sql-sql-error.-error-code-9050-disk_not_accessible/","title":"MaxDB startup error. 24988,ERR_SQL: SQL error. Error code 9050 «disk_not_accessible»"},{"content":" Итак у вас есть система SAP ERP, BW или какая-то другая система развернутая на базе данных SAP HANA. Требуется зайти в систему под суперпользователем SAP*. Инструкция аналогична входу под этим пользователем для других БД.\nВо-первых для успешного необходимо установить значение параметра в профиле инстанции\nlogin/no_automatic_user_sapstar = 0 Возможность входа под SAP* вшита в ядро системы и используется в случае если был утерян пароль администратора или кончился срок действия лицензии и система блокирует вход под другими учетными записями. Механизм входа встроенный в ядро работает только если учетная запись SAP* не создана в системе. Если запись существует ее следует удалить средствами БД.\nДля этого необходимо подключиться к системе HANA через SAP HANA Studio под учетной записью SAPABAP1 с мастер паролем т.к. у стандартного пользователя SYSTEM нет прав на работу со схемой содержащей таблицы SAP системы — SAPABAP1.\nДалее, убедившись что основная запись пользователя SAP* существует, необходимо выполнить SQL запрос\nDELETE FROM SAPABAP1.USR02 where bname = \u0026#39;SAP*\u0026#39; and mandt = \u0026#39;000\u0026#39;; После этого в систему можно зайти под пользователем SAP* и стандартным паролем PASS\n","date":"2015-08-21T00:00:00Z","image":"https://example.com/p/%D0%B2%D1%85%D0%BE%D0%B4-%D0%BF%D0%BE%D0%B4-sap-%D0%B2-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%83-sap-on-hana/saphana_hu33454148eb9cada3dd0394e8454bc417_6568_120x120_fill_q75_h2_box_smart1_2.webp","permalink":"https://example.com/p/%D0%B2%D1%85%D0%BE%D0%B4-%D0%BF%D0%BE%D0%B4-sap-%D0%B2-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%83-sap-on-hana/","title":"Вход под SAP* в систему SAP on HANA"}]